{"version":3,"sources":["components/chat/socket.js","components/message/message.js","components/send/send.js","components/chat/chat.js","index.js"],"names":["socket","io","process","Message","_ref","msg","currentUser","classDependUser","user","react_default","a","createElement","className","text","Send","onChange","onSend","value","onSubmit","type","Chat","state","isLogin","users","message","messages","changeMessage","event","_this","setState","target","changeName","inputName","emit","sendMessage","preventDefault","_this$state","trim","length","_this2","this","on","newMessages","Object","toConsumableArray","shift","concat","_this$state2","send","map","key","components_message_message","values","placeholder","id","htmlFor","onClick","Component","ReactDOM","render","StrictMode","chat_chat","document","getElementById"],"mappings":"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","file":"static/js/main.bb86f6c0.chunk.js","sourcesContent":["import io from \"socket.io-client\";\nconst URL = process.env.REACT_APP_URL || \"localhost:5000\";\nexport const socket = io(URL);\n","import React from \"react\";\nimport \"./message.css\";\n\nconst Message = ({ msg, currentUser }) => {\n\tconst classDependUser =\n\t\tmsg.user === currentUser ? \"alert alert-primary\" : \"alert alert-dark\";\n\treturn (\n\t\t<div className=\"message-container\">\n\t\t\t<span className={classDependUser}>\n\t\t\t\t{msg.user}: {msg.text}\n\t\t\t</span>\n\t\t</div>\n\t);\n};\n\nexport default Message;\n","import React from \"react\";\n\nconst Send = ({ onChange, onSend, value }) => {\n\treturn (\n\t\t<form className=\"input-group mb-3\" onSubmit={onSend}>\n\t\t\t<input className=\"form-control\" value={value} onChange={onChange} />\n\t\t\t<button className=\"btn btn-primary\" type=\"submit\">\n\t\t\t\tSend\n\t\t\t</button>\n\t\t</form>\n\t);\n};\n\nexport default Send;\n","import React, { Component } from \"react\";\nimport { socket } from \"./socket\";\nimport Message from \"../message\";\nimport Send from \"../send\";\nimport \"./chat.css\";\n\nclass Chat extends Component {\n\tsocket = socket;\n\tstate = {\n\t\tcurrentUser: \"\",\n\t\tisLogin: false,\n\t\tusers: {},\n\t\tmessage: \"\",\n\t\tmessages: [],\n\t};\n\n\tcomponentDidMount() {\n\t\tthis.socket.on(\"message\", (msg) => {\n\t\t\tif (this.state.isLogin) {\n\t\t\t\tthis.setState(({ messages }) => {\n\t\t\t\t\tconst newMessages = [...messages];\n\t\t\t\t\tif (newMessages.length > 10) {\n\t\t\t\t\t\tnewMessages.shift();\n\t\t\t\t\t}\n\t\t\t\t\treturn {\n\t\t\t\t\t\tmessages: [...newMessages, { user: msg.user, text: msg.message }],\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\tthis.socket.on(\"users\", (users) => {\n\t\t\tthis.setState({ users });\n\t\t});\n\t}\n\n\tchangeMessage = (event) => {\n\t\tthis.setState({ message: event.target.value });\n\t};\n\n\tchangeName = (event) => {\n\t\tthis.setState({ currentUser: event.target.value });\n\t};\n\n\tinputName = () => {\n\t\tconst user = this.state.currentUser;\n\t\tif (user !== \"\") {\n\t\t\tthis.setState({ isLogin: true });\n\t\t\tthis.socket.emit(\"change:name\", user);\n\t\t}\n\t};\n\n\tsendMessage = (event) => {\n\t\tevent.preventDefault();\n\t\tconst { currentUser, message } = this.state;\n\t\tif (message.trim().length) {\n\t\t\tthis.socket.emit(\"message\", {\n\t\t\t\tuser: currentUser,\n\t\t\t\tmessage: message.trim(),\n\t\t\t});\n\t\t\tthis.setState({ message: \"\" });\n\t\t}\n\t};\n\trender() {\n\t\tconst { isLogin, currentUser, message, messages, users } = this.state;\n\t\tif (!isLogin) {\n\t\t\treturn (\n\t\t\t\t<main className=\"form-signin\">\n\t\t\t\t\t<h4 className=\"form-floating mb-3\">Please, introduce yourself</h4>\n\t\t\t\t\t<div className=\"form-floating mb-3\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\tplaceholder=\"Введите ваш никнейм\"\n\t\t\t\t\t\t\tid=\"floatingInput\"\n\t\t\t\t\t\t\tvalue={currentUser}\n\t\t\t\t\t\t\tonChange={this.changeName}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<label htmlFor=\"floatingInput\">Nickname</label>\n\t\t\t\t\t</div>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"w-100 btn btn-lg btn-primary\"\n\t\t\t\t\t\tonClick={this.inputName}\n\t\t\t\t\t>\n\t\t\t\t\t\tLogin\n\t\t\t\t\t</button>\n\t\t\t\t</main>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<div className=\"container\">\n\t\t\t\t<div className=\"row align -items-start\">\n\t\t\t\t\t<div className=\"message-list col-md-9\">\n\t\t\t\t\t\t<Send\n\t\t\t\t\t\t\tvalue={message}\n\t\t\t\t\t\t\tonChange={this.changeMessage}\n\t\t\t\t\t\t\tonSend={this.sendMessage}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div className=\"messages\">\n\t\t\t\t\t\t\t{messages.map((msg, key) => (\n\t\t\t\t\t\t\t\t<Message msg={msg} currentUser={currentUser} key={key} />\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<ul className=\"list-group col-md-3\">\n\t\t\t\t\t\t{Object.values(users).map((user, key) => (\n\t\t\t\t\t\t\t<li className=\"list-group-item\" key={key}>\n\t\t\t\t\t\t\t\t{user}\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Chat;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/chat';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}